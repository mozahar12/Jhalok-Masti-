<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jhalok Masti - Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <style>
        body { background: #000; color: white; margin: 0; overflow: hidden; }
        .video-container { height: 100vh; overflow-y: scroll; scroll-snap-type: y mandatory; }
        .video-card { height: 100vh; scroll-snap-align: start; position: relative; display: flex; align-items: center; justify-content: center; }
        video { width: 100%; height: 100%; object-fit: cover; }
        .overlay { position: absolute; bottom: 80px; left: 15px; z-index: 10; }
        .actions { position: absolute; right: 15px; bottom: 100px; display: flex; flex-col; gap: 20px; text-align: center; }
    </style>
</head>
<body>

    <div class="video-container" id="feed">
        <div class="video-card">
            <video loop autoplay muted playsinline src="VID_20251206_041026_071.mp4" onclick="this.muted=!this.muted"></video>
            <div class="overlay">
                <h3 class="font-bold">@itz__alema__10k</h3>
                <p id="videoTitle" class="text-sm">আমার প্রথম ভিডিও! #JhalokMasti</p>
            </div>
            <div class="actions">
                <div onclick="toggleLike(this)"><i class="fas fa-heart text-3xl"></i><p class="text-xs">লাইক</p></div>
                <div onclick="alert('কমেন্ট বক্স শীঘ্রই আসছে!')"><i class="fas fa-comment text-3xl"></i><p class="text-xs">কমেন্ট</p></div>
                <div onclick="shareApp()"><i class="fas fa-share text-3xl"></i><p class="text-xs">শেয়ার</p></div>
            </div>
        </div>
    </div>

    <div class="fixed bottom-0 w-full h-16 bg-black flex justify-around items-center border-t border-zinc-900">
        <i class="fas fa-home text-2xl" onclick="location.reload()"></i>
        <label class="cursor-pointer">
            <i class="fas fa-plus-circle text-4xl text-red-500"></i>
            <input type="file" accept="video/*" class="hidden" onchange="addVideo(this)">
        </label>
        <i class="fas fa-user text-2xl" onclick="location.href='profile.html'"></i>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyA7MC6FIIWkQZMLHsZoNezkzdUxJFh",
            authDomain: "jhalok-masti.firebaseapp.com",
            projectId: "jhalok-masti",
            storageBucket: "jhalok-masti.firebasestorage.app",
            messagingSenderId: "765019855310",
            appId: "1:765019855310:web:036371e3a39b6895d"
        };
        firebase.initializeApp(firebaseConfig);

        // লগইন চেক (কেউ লগইন না করলে লগইন পেজে পাঠিয়ে দিবে)
        firebase.auth().onAuthStateChanged((user) => {
            if (!user) { window.location.href = "login.html"; }
        });

        // ভিডিও আপলোড করার সময় টাইটেল চাওয়ার অপশন
        function addVideo(input) {
            if (input.files[0]) {
                const title = prompt("ভিডিওর জন্য একটি টাইটেল লিখুন:");
                if (title) {
                    const url = URL.createObjectURL(input.files[0]);
                    const feed = document.getElementById('feed');
                    const newCard = document.createElement('div');
                    newCard.className = 'video-card';
                    newCard.innerHTML = `
                        <video loop autoplay playsinline src="${url}"></video>
                        <div class="overlay"><h3 class="font-bold">@আপনি</h3><p class="text-sm">${title}</p></div>
                        <div class="actions">
                            <div onclick="toggleLike(this)"><i class="fas fa-heart text-3xl"></i><p class="text-xs">0</p></div>
                            <i class="fas fa-comment text-3xl"></i>
                            <i class="fas fa-share text-3xl" onclick="shareApp()"></i>
                        </div>`;
                    feed.prepend(newCard);
                    feed.scrollTop = 0;
                }
            }
        }

        function toggleLike(btn) {
            btn.querySelector('i').classList.toggle('text-red-500');
        }

        function shareApp() {
            navigator.share({ title: 'Jhalok Masti', url: window.location.href });
        }
    </script>
</body>
</html>

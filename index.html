<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jhalok Masti - Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <style>
        body { background: #000; color: white; margin: 0; overflow: hidden; font-family: sans-serif; }
        .video-container { height: 100vh; overflow-y: scroll; scroll-snap-type: y mandatory; }
        .video-card { height: 100vh; scroll-snap-align: start; position: relative; display: flex; align-items: center; justify-content: center; background: black; }
        video { width: 100%; height: 100%; object-fit: cover; }
        .overlay { position: absolute; bottom: 80px; left: 15px; z-index: 10; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .actions { position: absolute; right: 15px; bottom: 100px; display: flex; flex-direction: column; gap: 20px; text-align: center; }
    </style>
</head>
<body>

    <div class="video-container" id="feed">
        <div class="video-card">
            <video loop autoplay muted playsinline src="VID_20251206_041026_071.mp4" onclick="this.muted=!this.muted"></video>
            <div class="overlay">
                <h3 class="font-bold text-lg text-red-500">@JhalokMasti_User</h3>
                <p id="videoTitle" class="text-sm">‡¶ù‡¶≤‡¶ï ‡¶Æ‡¶æ‡¶∏‡ßç‡¶§‡¶ø‡¶§‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! üî• #JhalokMasti</p>
            </div>
            <div class="actions">
                <div onclick="toggleLike(this)" class="cursor-pointer"><i class="fas fa-heart text-3xl"></i><p class="text-xs">‡¶≤‡¶æ‡¶á‡¶ï</p></div>
                <div onclick="alert('‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶õ‡ßá!')" class="cursor-pointer"><i class="fas fa-comment text-3xl"></i><p class="text-xs">‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü</p></div>
                <div onclick="shareApp()" class="cursor-pointer"><i class="fas fa-share text-3xl"></i><p class="text-xs">‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞</p></div>
            </div>
        </div>
    </div>

    <div class="fixed bottom-0 w-full h-16 bg-black flex justify-around items-center border-t border-zinc-900 z-50">
        <i class="fas fa-home text-2xl text-red-500" onclick="location.reload()"></i>
        <label class="cursor-pointer">
            <i class="fas fa-plus-circle text-4xl text-white"></i>
            <input type="file" accept="video/*" class="hidden" onchange="addVideo(this)">
        </label>
        <i class="fas fa-user text-2xl" onclick="location.href='profile.html'"></i>
    </div>

    <script>
        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï Firebase ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®
        const firebaseConfig = {
            apiKey: "AIzaSyA7MC6FIIWkQZMLHsZoNezkzdUxJFh",
            authDomain: "jhalok-masti.firebaseapp.com",
            projectId: "jhalok-masti",
            storageBucket: "jhalok-masti.firebasestorage.app",
            messagingSenderId: "765019855310",
            appId: "1:765019855310:web:036371e3a39b6895d"
        };
        firebase.initializeApp(firebaseConfig);

        // ‡¶≤‡¶ó‡¶á‡¶® ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡ßá‡¶ú‡ßá ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡¶¨‡ßá
        firebase.auth().onAuthStateChanged((user) => {
            if (!user) { window.location.href = "login.html"; }
        });

        // ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ì ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
        function addVideo(input) {
            if (input.files[0]) {
                const title = prompt("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:");
                if (title) {
                    const url = URL.createObjectURL(input.files[0]);
                    const feed = document.getElementById('feed');
                    const newCard = document.createElement('div');
                    newCard.className = 'video-card';
                    newCard.innerHTML = `
                        <video loop autoplay playsinline src="${url}"></video>
                        <div class="overlay"><h3 class="font-bold text-red-500">@‡¶Ü‡¶™‡¶®‡¶ø</h3><p class="text-sm">${title}</p></div>
                        <div class="actions">
                            <div onclick="toggleLike(this)" class="cursor-pointer"><i class="fas fa-heart text-3xl"></i><p class="text-xs">0</p></div>
                            <div class="cursor-pointer"><i class="fas fa-comment text-3xl"></i><p class="text-xs">0</p></div>
                            <div onclick="shareApp()" class="cursor-pointer"><i class="fas fa-share text-3xl"></i><p class="text-xs">‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞</p></div>
                        </div>`;
                    feed.prepend(newCard);
                    feed.scrollTop = 0;
                }
            }
        }

        function toggleLike(btn) {
            const heart = btn.querySelector('i');
            heart.classList.toggle('text-red-500');
        }

        function shareApp() {
            if (navigator.share) {
                navigator.share({ title: 'Jhalok Masti', url: window.location.href });
            } else {
                alert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶Ö‡¶™‡¶∂‡¶® ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶õ‡ßá ‡¶®‡¶æ‡•§ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßá ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶¶‡¶ø‡¶®!");
            }
        }
    </script>
</body>
</html>

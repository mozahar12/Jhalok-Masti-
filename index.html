<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jhalok Masti - Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; font-family: sans-serif; }
        .app-container { height: 100vh; width: 100vw; position: relative; overflow: hidden; }
        video { width: 100%; height: 100%; object-fit: cover; background: #000; }
        
        /* স্টোরি সেকশন */
        .stories-container {
            position: absolute; top: 45px; left: 0; width: 100%;
            display: flex; padding: 10px; overflow-x: auto; z-index: 40; gap: 12px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
        }
        .story-circle { min-width: 65px; height: 65px; border-radius: 50%; border: 3px solid #f09433; padding: 2px; }
        .story-circle img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }

        /* নিচের নেভিগেশন বার */
        .bottom-nav { 
            position: absolute; bottom: 0; width: 100%; height: 65px; 
            background: #000; display: flex; justify-content: space-around; 
            align-items: center; z-index: 50; border-top: 1px solid #222; 
        }
        .nav-item { color: #888; font-size: 24px; cursor: pointer; }
        .nav-item.active { color: white; }

        /* সাইড বাটন */
        .side-icons { position: absolute; right: 12px; bottom: 120px; display: flex; flex-direction: column; gap: 20px; z-index: 30; }
        .icon-btn { color: white; text-align: center; }
        .icon-btn i { font-size: 28px; }
        .icon-btn span { font-size: 11px; display: block; }
    </style>
</head>
<body>

<div class="app-container" id="swipeArea">
    <video id="mainVideo" playsinline loop src="VID_20251206_041026_071.mp4"></video>

    <div class="stories-container">
        <label class="min-w-[65px] h-[65px] rounded-full bg-zinc-800 flex items-center justify-center border-2 border-dashed border-zinc-600 cursor-pointer">
            <i class="fas fa-plus text-white text-xl"></i>
            <input type="file" accept="image/*" class="hidden" onchange="uploadStory(this)">
        </label>
        <div id="storyList" class="flex gap-3">
            </div>
    </div>

    <div class="side-icons">
        <div class="icon-btn"><i class="fas fa-heart"></i><span>45K</span></div>
        <div class="icon-btn"><i class="fas fa-comment-dots"></i><span>1.2K</span></div>
        <div class="icon-btn"><i class="fas fa-share"></i><span>Share</span></div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active"><i class="fas fa-home"></i></div>
        <div class="nav-item"><i class="fas fa-search"></i></div>
        <div class="nav-item"><i class="far fa-plus-square"></i></div>
        <div class="nav-item" onclick="window.location.href='profile.html'"><i class="far fa-user-circle"></i></div>
    </div>
</div>

<script>
    const videos = ["VID_20251206_041026_071.mp4", "videos 22.mp4"];
    let vIdx = 0;
    const player = document.getElementById('mainVideo');
    let touchStartY = 0;

    // সোয়াইপ সিস্টেম
    document.addEventListener('touchstart', e => touchStartY = e.touches[0].clientY);
    document.addEventListener('touchend', e => {
        let touchEndY = e.changedTouches[0].clientY;
        if (touchStartY - touchEndY > 60) {
            vIdx = (vIdx + 1) % videos.length;
            player.src = videos[vIdx];
            player.play();
        }
    });

    // স্টোরি লোড করা
    function uploadStory(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = e => {
                let stories = JSON.parse(localStorage.getItem('userStories') || '[]');
                stories.unshift(e.target.result);
                localStorage.setItem('userStories', JSON.stringify(stories));
                loadStories();
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function loadStories() {
        const list = document.getElementById('storyList');
        const saved = JSON.parse(localStorage.getItem('userStories') || '[]');
        list.innerHTML = saved.map(src => `<div class="story-circle"><img src="${src}"></div>`).join('');
    }

    // স্ক্রিনে ক্লিক করলে মিউজিক চালু
    document.body.onclick = () => { player.muted = false; player.play(); };
    window.onload = loadStories;
</script>

</body>
</html>
